<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Th·∫£ Bong B√≥ng M∆° ∆Ø·ªõc üéà</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  * { margin:0; padding:0; box-sizing:border-box; user-select:none; }
  html,body { height:100%; }

  body {
    overflow: hidden;
    height: 100vh;
    width: 100vw;
    font-family: 'Poppins', sans-serif;
    position: relative;
    background: url('sang.png') center/cover no-repeat;
    transition: background 3s ease-in-out;
    color: #fff;
  }

  /* Intro */
  .intro {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.28);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    padding: 24px;
    z-index: 999;
    animation: fadeIn 0.6s ease both;
  }

  .intro-text {
    font-size: 1.15rem;
    max-width: 92%;
    line-height: 1.6;
    color: #fff;
    margin-bottom: 18px;
    opacity: 0;
    animation: textAppear 0.15s ease forwards;
  }

  .intro button {
    padding: 10px 26px;
    border:none;
    border-radius: 26px;
    background: rgba(255,255,255,0.9);
    color: #222;
    font-weight:600;
    cursor:pointer;
    transform-origin:center;
    opacity: 0;
    animation: textAppear 0.8s ease forwards 2.6s;
  }

  @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
  @keyframes fadeOut { from { opacity: 1 } to { opacity: 0 } }
  @keyframes textAppear {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* centered hint message (s·∫Ω hi·ªÉn th·ªã ·ªü gi·ªØa m√†n h√¨nh) */
  .message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.05rem;
    background: rgba(0,0,0,0.28);
    padding: 12px 18px;
    border-radius: 18px;
    letter-spacing: 0.6px;
    text-align: center;
    display: none; /* ·∫©n ban ƒë·∫ßu, show sau intro */
    z-index: 50;
  }

  /* popup cu·ªëi */
  .popup {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: rgba(255,255,255,0.95);
    padding: 22px 26px;
    border-radius: 18px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    font-size: 1.15rem;
    color: #222;
    transition: transform 0.45s cubic-bezier(.2,.9,.3,1);
    z-index: 100;
    max-width: 86%;
  }

  .popup.show { transform: translate(-50%, -50%) scale(1); }

  /* inside popup: money images positioned inline (not absolute) */
  .popup .money-wrap {
    margin-top: 12px;
    display:flex;
    justify-content:center;
    gap: 14px;
    align-items:flex-end;
  }

  .popup .money {
    width: 110px;
    max-width: 28%;
    height: auto;
    transform-origin: center;
    /* nh·∫π tilt ƒë·ªÉ ƒë·∫πp */
  }
  .popup .money.left { transform: rotate(-8deg); }
  .popup .money.right { transform: rotate(6deg); }

  /* bong b√≥ng */
  .bubble {
    position: absolute;
    bottom: 0;
    width: 80px;
    height: 110px;
    background: url('balloon.png') center/contain no-repeat;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    color: #003366;
    font-size: 0.78rem;
    font-weight: 500;
    opacity: 1;
    animation: floatUp 7s ease-in forwards;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
    padding-top: 10px;
    line-height: 1.1;
    z-index: 20;
    pointer-events: none;
  }

  @keyframes floatUp {
    0%   { transform: translateY(0) scale(1); opacity: 1; }
    75%  { opacity: 0.95; }
    100% { transform: translateY(-120vh) scale(1.05); opacity: 0; }
  }

  /* responsive */
  @media (max-width:520px) {
    .popup { font-size: 1rem; padding: 16px; }
    .popup .money { width: 90px; }
    .intro-text { font-size: 1rem; }
    .message { font-size: 0.98rem; padding: 10px 14px; }
  }
</style>
</head>
<body>
  <!-- Intro -->
  <div class="intro" id="intro" aria-hidden="false">
    <div class="intro-text" id="introText"></div>
    <button id="startBtn">B·∫Øt ƒë·∫ßu üéà</button>
  </div>

  <!-- Hint (centered) -->
  <div class="message" id="hint">üåª H√£y ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ th·∫£ bong b√≥ng m∆° ∆∞·ªõc c·ªßa em üéà</div>

  <!-- Popup cu·ªëi (·∫£nh ti·ªÅn n·∫±m b√™n trong) -->
  <div class="popup" id="popup" aria-hidden="true">
    üåô B√© ∆∞·ªõc xong r·ªìi ch·ªã b√© ho√†n th√†nh nhi·ªám v·ª• ph·∫ßn th∆∞·ªüng l√† 2 t·ªù n√†y t·∫°m th·ªùi b√© gi·ªØ gi√∫p ch·ªã üí´
    <div class="money-wrap">
      <img src="money1.png" alt="money" class="money left">
      <img src="money2.png" alt="money" class="money right">
    </div>
  </div>

  <audio id="bgMusic" src="song.mp3" loop></audio>

<script>
  /* intro text lines */
  const storyLines = [
    "C√≥ nh·ªØng ƒëi·ªÅu nh·ªè b√©‚Ä¶ üå∏",
    "Kh√¥ng th·ªÉ n√≥i ra, nh∆∞ng l·∫°i mu·ªën g·ª≠i g·∫Øm v√†o tr·ªùi cao üå§Ô∏è",
    "M·ªói bong b√≥ng ch·ªã b√© th·∫£ ra l√† m·ªôt ƒëi·ªÅu m√† b√© mong mu·ªën üåà",
    "Ch·ªã gi√∫p b√© th·∫£ bong b√≥ng nha"
  ];

  const introTextEl = document.getElementById('introText');
  const intro = document.getElementById('intro');
  const startBtn = document.getElementById('startBtn');
  const hint = document.getElementById('hint');
  const popup = document.getElementById('popup');
  const music = document.getElementById('bgMusic');

  let lineIndex = 0;
  function showNextLine() {
    if (lineIndex >= storyLines.length) return;
    introTextEl.textContent = storyLines[lineIndex];
    // trigger animation restart
    introTextEl.style.animation = 'none';
    void introTextEl.offsetWidth;
    introTextEl.style.animation = 'textAppear 0.6s ease forwards';
    lineIndex++;
    setTimeout(showNextLine, 2000);
  }
  showNextLine();

  // start button: fade intro then show hint and start music
  startBtn.addEventListener('click', () => {
    intro.style.animation = 'fadeOut 0.6s ease forwards';
    // small delay to allow fade
    setTimeout(() => {
      // remove intro from DOM so clicks pass through
      if (intro && intro.parentElement) intro.parentElement.removeChild(intro);
      hint.style.display = 'block';
      // play music (user gesture)
      music.play().catch(()=>{});
    }, 650);
  });

  /* wishes in order */
  const wishes = [
    "Mong ng√†y mai c·ªßa ch·ªã b√© s·∫Ω th·∫≠t vui v·∫ª üåø",
    "Ng√†y mai ch·ªã b√© s·∫Ω c∆∞·ªùi nhi·ªÅu h∆°n 1 ch√∫t ‚òÅÔ∏è",
    "Xui x·∫ªo d·ª´ng l·∫°i ·ªü h√¥m nay, ng√†y mai s·∫Ω g·∫∑p nhi·ªÅu may m·∫Øn üåû",
    "Ch·ªã b√© kh√¥ng c·∫ßn ho√†n h·∫£o, ch·ªâ c·∫ßn l√† ch√≠nh m√¨nh üçÄ",
    "Ch·ªã b√© v·∫•t v·∫£ r·ªìi, h√£y ngh·ªâ ng∆°i nhi·ªÅu h∆°n üåà ",
    "M·ªçi c·ªë g·∫Øng c·ªßa ch·ªã b√© ƒë·ªÅu s·∫Ω ƒë∆∞·ª£c ƒë·ªÅn ƒë√°p üí´",
    "Ch·ªã b√© x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu d·ªãu d√†ng h∆°n üåû",
    "Ng√†y mai c·ªßa ch·ªã b√© m·ªçi th·ª© s·∫Ω thu·∫≠n l·ª£i h∆°n üåº",
    "B·∫ßu tr·ªùi c√≥ th·ªÉ thay m√†u, nh∆∞ng l√≤ng ng∆∞·ªùi v·∫´n c√≥ th·ªÉ trong xanh. üçÉ",
    "Ng·ªß ngon nha hong bu·ªìn n·ªØa üåª"
  ];

  let count = 0;
  let isNight = false;

  // day/night background switch runs from start (intro visible too)
  setInterval(() => {
    isNight = !isNight;
    document.body.style.background = isNight
      ? "url('dem.png') center/cover no-repeat"
      : "url('sang.png') center/cover no-repeat";
  }, 10000);

  // create bubble with ordered wishes
  function createBubble(x, y) {
    if (count >= wishes.length) return; // limit
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.style.left = (x - 40) + 'px';
    bubble.style.bottom = '0px';
    bubble.textContent = wishes[count];
    document.body.appendChild(bubble);

    bubble.addEventListener('animationend', () => bubble.remove());

    count++;
    if (count === wishes.length) {
      setTimeout(() => popup.classList.add('show'), 700);
    }
  }

  // prevent clicks when intro still present; otherwise allow
  document.body.addEventListener('click', (e) => {
    // if intro still exists in DOM, ignore clicks
    if (document.getElementById('intro')) return;
    // if popup already shown and user clicks popup, ignore
    if (popup.classList.contains('show')) return;
    const x = e.clientX;
    const y = e.clientY;
    createBubble(x, y);
  });
</script>
</body>
</html>

